{"ast":null,"code":"import { WDAYMASK, M365MASK, M365RANGE, M366MASK, M366RANGE, MDAY365MASK, MDAY366MASK, NMDAY365MASK, NMDAY366MASK } from './masks';\nimport RRule from './rrule';\nimport dateutil from './dateutil';\nimport { notEmpty, repeat, pymod, includes, range, isPresent, empty } from './helpers';\n// =============================================================================\n// Iterinfo\n// =============================================================================\nvar Iterinfo = /** @class */function () {\n  function Iterinfo(rrule) {\n    this.yearlen = 365;\n    this.nextyearlen = 365;\n    this.rrule = rrule;\n    this.mmask = null;\n    this.mrange = null;\n    this.mdaymask = null;\n    this.nmdaymask = null;\n    this.wdaymask = null;\n    this.wnomask = null;\n    this.nwdaymask = null;\n    this.eastermask = null;\n  }\n  Iterinfo.prototype.easter = function (y, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    var a = y % 19;\n    var b = Math.floor(y / 100);\n    var c = y % 100;\n    var d = Math.floor(b / 4);\n    var e = b % 4;\n    var f = Math.floor((b + 8) / 25);\n    var g = Math.floor((b - f + 1) / 3);\n    var h = Math.floor(19 * a + b - d - g + 15) % 30;\n    var i = Math.floor(c / 4);\n    var k = c % 4;\n    var l = Math.floor(32 + 2 * e + 2 * i - h - k) % 7;\n    var m = Math.floor((a + 11 * h + 22 * l) / 451);\n    var month = Math.floor((h + l - 7 * m + 114) / 31);\n    var day = (h + l - 7 * m + 114) % 31 + 1;\n    var date = Date.UTC(y, month - 1, day + offset);\n    var yearStart = Date.UTC(y, 0, 1);\n    return [Math.ceil((date - yearStart) / (1000 * 60 * 60 * 24))];\n  };\n  Iterinfo.prototype.rebuild = function (year, month) {\n    var rr = this.rrule;\n    if (year !== this.lastyear) {\n      this.rebuildYear(year);\n    }\n    if (notEmpty(rr.options.bynweekday) && (month !== this.lastmonth || year !== this.lastyear)) {\n      this.rebuildMonth(year, month);\n    }\n    if (isPresent(rr.options.byeaster)) {\n      this.eastermask = this.easter(year, rr.options.byeaster);\n    }\n  };\n  Iterinfo.prototype.rebuildYear = function (year) {\n    var rr = this.rrule;\n    this.yearlen = dateutil.isLeapYear(year) ? 366 : 365;\n    this.nextyearlen = dateutil.isLeapYear(year + 1) ? 366 : 365;\n    var firstyday = new Date(Date.UTC(year, 0, 1));\n    this.yearordinal = dateutil.toOrdinal(firstyday);\n    this.yearweekday = dateutil.getWeekday(firstyday);\n    var wday = dateutil.getWeekday(firstyday);\n    if (this.yearlen === 365) {\n      this.mmask = M365MASK;\n      this.mdaymask = MDAY365MASK;\n      this.nmdaymask = NMDAY365MASK;\n      this.wdaymask = WDAYMASK.slice(wday);\n      this.mrange = M365RANGE;\n    } else {\n      this.mmask = M366MASK;\n      this.mdaymask = MDAY366MASK;\n      this.nmdaymask = NMDAY366MASK;\n      this.wdaymask = WDAYMASK.slice(wday);\n      this.mrange = M366RANGE;\n    }\n    if (empty(rr.options.byweekno)) {\n      this.wnomask = null;\n    } else {\n      this.wnomask = repeat(0, this.yearlen + 7);\n      var no1wkst = void 0;\n      var firstwkst = void 0;\n      var wyearlen = void 0;\n      no1wkst = firstwkst = pymod(7 - this.yearweekday + rr.options.wkst, 7);\n      if (no1wkst >= 4) {\n        no1wkst = 0;\n        // Number of days in the year, plus the days we got\n        // from last year.\n        wyearlen = this.yearlen + pymod(this.yearweekday - rr.options.wkst, 7);\n      } else {\n        // Number of days in the year, minus the days we\n        // left in last year.\n        wyearlen = this.yearlen - no1wkst;\n      }\n      var div = Math.floor(wyearlen / 7);\n      var mod = pymod(wyearlen, 7);\n      var numweeks = Math.floor(div + mod / 4);\n      for (var j = 0; j < rr.options.byweekno.length; j++) {\n        var i = void 0;\n        var n = rr.options.byweekno[j];\n        if (n < 0) {\n          n += numweeks + 1;\n        }\n        if (!(n > 0 && n <= numweeks)) {\n          continue;\n        }\n        if (n > 1) {\n          i = no1wkst + (n - 1) * 7;\n          if (no1wkst !== firstwkst) {\n            i -= 7 - firstwkst;\n          }\n        } else {\n          i = no1wkst;\n        }\n        for (var k = 0; k < 7; k++) {\n          this.wnomask[i] = 1;\n          i++;\n          if (this.wdaymask[i] === rr.options.wkst) break;\n        }\n      }\n      if (includes(rr.options.byweekno, 1)) {\n        // Check week number 1 of next year as well\n        // orig-TODO : Check -numweeks for next year.\n        var i = no1wkst + numweeks * 7;\n        if (no1wkst !== firstwkst) i -= 7 - firstwkst;\n        if (i < this.yearlen) {\n          // If week starts in next year, we\n          // don't care about it.\n          for (var j = 0; j < 7; j++) {\n            this.wnomask[i] = 1;\n            i += 1;\n            if (this.wdaymask[i] === rr.options.wkst) break;\n          }\n        }\n      }\n      if (no1wkst) {\n        // Check last week number of last year as\n        // well. If no1wkst is 0, either the year\n        // started on week start, or week number 1\n        // got days from last year, so there are no\n        // days from last year's last week number in\n        // this year.\n        var lnumweeks = void 0;\n        if (!includes(rr.options.byweekno, -1)) {\n          var lyearweekday = dateutil.getWeekday(new Date(Date.UTC(year - 1, 0, 1)));\n          var lno1wkst = pymod(7 - lyearweekday.valueOf() + rr.options.wkst, 7);\n          var lyearlen = dateutil.isLeapYear(year - 1) ? 366 : 365;\n          if (lno1wkst >= 4) {\n            lno1wkst = 0;\n            lnumweeks = Math.floor(52 + pymod(lyearlen + pymod(lyearweekday - rr.options.wkst, 7), 7) / 4);\n          } else {\n            lnumweeks = Math.floor(52 + pymod(this.yearlen - no1wkst, 7) / 4);\n          }\n        } else {\n          lnumweeks = -1;\n        }\n        if (includes(rr.options.byweekno, lnumweeks)) {\n          for (var i = 0; i < no1wkst; i++) this.wnomask[i] = 1;\n        }\n      }\n    }\n  };\n  Iterinfo.prototype.rebuildMonth = function (year, month) {\n    var rr = this.rrule;\n    var ranges = [];\n    if (rr.options.freq === RRule.YEARLY) {\n      if (notEmpty(rr.options.bymonth)) {\n        for (var j = 0; j < rr.options.bymonth.length; j++) {\n          month = rr.options.bymonth[j];\n          ranges.push(this.mrange.slice(month - 1, month + 1));\n        }\n      } else {\n        ranges = [[0, this.yearlen]];\n      }\n    } else if (rr.options.freq === RRule.MONTHLY) {\n      ranges = [this.mrange.slice(month - 1, month + 1)];\n    }\n    if (notEmpty(ranges)) {\n      // Weekly frequency won't get here, so we may not\n      // care about cross-year weekly periods.\n      this.nwdaymask = repeat(0, this.yearlen);\n      for (var j = 0; j < ranges.length; j++) {\n        var rang = ranges[j];\n        var first = rang[0];\n        var last = rang[1];\n        last -= 1;\n        for (var k = 0; k < rr.options.bynweekday.length; k++) {\n          var i = void 0;\n          var wday = rr.options.bynweekday[k][0];\n          var n = rr.options.bynweekday[k][1];\n          if (n < 0) {\n            i = last + (n + 1) * 7;\n            i -= pymod(this.wdaymask[i] - wday, 7);\n          } else {\n            i = first + (n - 1) * 7;\n            i += pymod(7 - this.wdaymask[i] + wday, 7);\n          }\n          if (first <= i && i <= last) this.nwdaymask[i] = 1;\n        }\n      }\n    }\n    this.lastyear = year;\n    this.lastmonth = month;\n  };\n  Iterinfo.prototype.ydayset = function () {\n    return [range(this.yearlen), 0, this.yearlen];\n  };\n  Iterinfo.prototype.mdayset = function (_, month, __) {\n    var start = this.mrange[month - 1];\n    var end = this.mrange[month];\n    var set = repeat(null, this.yearlen);\n    for (var i = start; i < end; i++) set[i] = i;\n    return [set, start, end];\n  };\n  Iterinfo.prototype.wdayset = function (year, month, day) {\n    // We need to handle cross-year weeks here.\n    var set = repeat(null, this.yearlen + 7);\n    var i = dateutil.toOrdinal(new Date(Date.UTC(year, month - 1, day))) - this.yearordinal;\n    var start = i;\n    for (var j = 0; j < 7; j++) {\n      set[i] = i;\n      ++i;\n      if (this.wdaymask[i] === this.rrule.options.wkst) break;\n    }\n    return [set, start, i];\n  };\n  Iterinfo.prototype.ddayset = function (year, month, day) {\n    var set = repeat(null, this.yearlen);\n    var i = dateutil.toOrdinal(new Date(Date.UTC(year, month - 1, day))) - this.yearordinal;\n    set[i] = i;\n    return [set, i, i + 1];\n  };\n  Iterinfo.prototype.htimeset = function (hour, minute, second, millisecond) {\n    var set = [];\n    var rr = this.rrule;\n    for (var i = 0; i < rr.options.byminute.length; i++) {\n      minute = rr.options.byminute[i];\n      for (var j = 0; j < rr.options.bysecond.length; j++) {\n        second = rr.options.bysecond[j];\n        set.push(new dateutil.Time(hour, minute, second, millisecond));\n      }\n    }\n    dateutil.sort(set);\n    return set;\n  };\n  Iterinfo.prototype.mtimeset = function (hour, minute, second, millisecond) {\n    var set = [];\n    var rr = this.rrule;\n    for (var j = 0; j < rr.options.bysecond.length; j++) {\n      second = rr.options.bysecond[j];\n      set.push(new dateutil.Time(hour, minute, second, millisecond));\n    }\n    dateutil.sort(set);\n    return set;\n  };\n  Iterinfo.prototype.stimeset = function (hour, minute, second, millisecond) {\n    return [new dateutil.Time(hour, minute, second, millisecond)];\n  };\n  return Iterinfo;\n}();\nexport default Iterinfo;","map":{"version":3,"names":["WDAYMASK","M365MASK","M365RANGE","M366MASK","M366RANGE","MDAY365MASK","MDAY366MASK","NMDAY365MASK","NMDAY366MASK","RRule","dateutil","notEmpty","repeat","pymod","includes","range","isPresent","empty","Iterinfo","rrule","yearlen","nextyearlen","mmask","mrange","mdaymask","nmdaymask","wdaymask","wnomask","nwdaymask","eastermask","prototype","easter","y","offset","a","b","Math","floor","c","d","e","f","g","h","i","k","l","m","month","day","date","Date","UTC","yearStart","ceil","rebuild","year","rr","lastyear","rebuildYear","options","bynweekday","lastmonth","rebuildMonth","byeaster","isLeapYear","firstyday","yearordinal","toOrdinal","yearweekday","getWeekday","wday","slice","byweekno","no1wkst","firstwkst","wyearlen","wkst","div","mod","numweeks","j","length","n","lnumweeks","lyearweekday","lno1wkst","valueOf","lyearlen","ranges","freq","YEARLY","bymonth","push","MONTHLY","rang","first","last","ydayset","mdayset","_","__","start","end","set","wdayset","ddayset","htimeset","hour","minute","second","millisecond","byminute","bysecond","Time","sort","mtimeset","stimeset"],"sources":["../../src/iterinfo.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}