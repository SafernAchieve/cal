{"ast":null,"code":"import RRule, { DEFAULT_OPTIONS } from './rrule';\nimport { includes, isPresent, isArray, isNumber, toArray } from './helpers';\nimport { Weekday } from './weekday';\nimport dateutil from './dateutil';\nexport function optionsToString(options) {\n  var pairs = [];\n  var keys = Object.keys(options);\n  var defaultKeys = Object.keys(DEFAULT_OPTIONS);\n  for (var i = 0; i < keys.length; i++) {\n    if (keys[i] === 'tzid') continue;\n    if (!includes(defaultKeys, keys[i])) continue;\n    var key = keys[i].toUpperCase();\n    var value = options[keys[i]];\n    var outValue = '';\n    if (!isPresent(value) || isArray(value) && !value.length) continue;\n    switch (key) {\n      case 'FREQ':\n        outValue = RRule.FREQUENCIES[options.freq];\n        break;\n      case 'WKST':\n        if (isNumber(value)) {\n          outValue = new Weekday(value).toString();\n        } else {\n          outValue = value.toString();\n        }\n        break;\n      case 'BYWEEKDAY':\n        /*\n        NOTE: BYWEEKDAY is a special case.\n        RRule() deconstructs the rule.options.byweekday array\n        into an array of Weekday arguments.\n        On the other hand, rule.origOptions is an array of Weekdays.\n        We need to handle both cases here.\n        It might be worth change RRule to keep the Weekdays.\n               Also, BYWEEKDAY (used by RRule) vs. BYDAY (RFC)\n               */\n        key = 'BYDAY';\n        var arrayValue = toArray(value);\n        outValue = toArray(value).map(function (wday) {\n          if (wday instanceof Weekday) {\n            return wday;\n          } else if (isArray(wday)) {\n            return new Weekday(wday[0], wday[1]);\n          } else {\n            return new Weekday(wday);\n          }\n        }).toString();\n        break;\n      case 'DTSTART':\n      case 'UNTIL':\n        outValue = dateutil.timeToUntilString(value, !options.tzid);\n        if (options.tzid) {\n          outValue = \";TZID=\" + options.tzid + \":\" + outValue;\n        }\n        break;\n      default:\n        if (isArray(value)) {\n          var strValues = [];\n          for (var j = 0; j < value.length; j++) {\n            strValues[j] = String(value[j]);\n          }\n          outValue = strValues.toString();\n        } else {\n          outValue = String(value);\n        }\n    }\n    pairs.push([key, outValue]);\n  }\n  var strings = [];\n  for (var i = 0; i < pairs.length; i++) {\n    var _a = pairs[i],\n      key = _a[0],\n      value = _a[1];\n    if (value.indexOf(';') === 0) {\n      strings.push(\"\" + key + value);\n    } else {\n      strings.push(key + \"=\" + value.toString());\n    }\n  }\n  return strings.join(';');\n}","map":{"version":3,"names":["RRule","DEFAULT_OPTIONS","includes","isPresent","isArray","isNumber","toArray","Weekday","dateutil","optionsToString","options","pairs","keys","Object","defaultKeys","i","length","key","toUpperCase","value","outValue","FREQUENCIES","freq","toString","arrayValue","map","wday","timeToUntilString","tzid","strValues","j","String","push","strings","_a","indexOf","join"],"sources":["../../src/optionstostring.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}