{"ast":null,"code":"import ENGLISH from './i18n';\nimport RRule from '../index';\nimport { isArray, isNumber, isPresent } from '../helpers';\n// =============================================================================\n// Helper functions\n// =============================================================================\n/**\n * Return true if a value is in an array\n */\nvar contains = function (arr, val) {\n  return arr.indexOf(val) !== -1;\n};\nvar defaultGetText = function (id) {\n  return id.toString();\n};\n/**\n *\n * @param {RRule} rrule\n * Optional:\n * @param {Function} gettext function\n * @param {Object} language definition\n * @constructor\n */\nvar ToText = /** @class */function () {\n  function ToText(rrule, gettext, language) {\n    if (gettext === void 0) {\n      gettext = defaultGetText;\n    }\n    if (language === void 0) {\n      language = ENGLISH;\n    }\n    this.text = [];\n    this.language = language || ENGLISH;\n    this.gettext = gettext;\n    this.rrule = rrule;\n    this.options = rrule.options;\n    this.origOptions = rrule.origOptions;\n    if (this.origOptions.bymonthday) {\n      var bymonthday = [].concat(this.options.bymonthday);\n      var bynmonthday = [].concat(this.options.bynmonthday);\n      bymonthday.sort(function (a, b) {\n        return a - b;\n      });\n      bynmonthday.sort(function (a, b) {\n        return b - a;\n      });\n      // 1, 2, 3, .., -5, -4, -3, ..\n      this.bymonthday = bymonthday.concat(bynmonthday);\n      if (!this.bymonthday.length) this.bymonthday = null;\n    }\n    if (isPresent(this.origOptions.byweekday)) {\n      var byweekday = !isArray(this.origOptions.byweekday) ? [this.origOptions.byweekday] : this.origOptions.byweekday;\n      var days = String(byweekday);\n      this.byweekday = {\n        allWeeks: byweekday.filter(function (weekday) {\n          return !weekday.n;\n        }),\n        someWeeks: byweekday.filter(function (weekday) {\n          return Boolean(weekday.n);\n        }),\n        isWeekdays: days.indexOf('MO') !== -1 && days.indexOf('TU') !== -1 && days.indexOf('WE') !== -1 && days.indexOf('TH') !== -1 && days.indexOf('FR') !== -1 && days.indexOf('SA') === -1 && days.indexOf('SU') === -1,\n        isEveryDay: days.indexOf('MO') !== -1 && days.indexOf('TU') !== -1 && days.indexOf('WE') !== -1 && days.indexOf('TH') !== -1 && days.indexOf('FR') !== -1 && days.indexOf('SA') !== -1 && days.indexOf('SU') !== -1\n      };\n      var sortWeekDays = function (a, b) {\n        return a.weekday - b.weekday;\n      };\n      this.byweekday.allWeeks.sort(sortWeekDays);\n      this.byweekday.someWeeks.sort(sortWeekDays);\n      if (!this.byweekday.allWeeks.length) this.byweekday.allWeeks = null;\n      if (!this.byweekday.someWeeks.length) this.byweekday.someWeeks = null;\n    } else {\n      this.byweekday = null;\n    }\n  }\n  /**\n   * Test whether the rrule can be fully converted to text.\n   * @param {RRule} rrule\n   * @return {Boolean}\n   */\n  ToText.isFullyConvertible = function (rrule) {\n    var canConvert = true;\n    if (!(rrule.options.freq in ToText.IMPLEMENTED)) return false;\n    if (rrule.origOptions.until && rrule.origOptions.count) return false;\n    for (var key in rrule.origOptions) {\n      if (contains(['dtstart', 'wkst', 'freq'], key)) return true;\n      if (!contains(ToText.IMPLEMENTED[rrule.options.freq], key)) return false;\n    }\n    return canConvert;\n  };\n  ToText.prototype.isFullyConvertible = function () {\n    return ToText.isFullyConvertible(this.rrule);\n  };\n  /**\n   * Perform the conversion. Only some of the frequencies are supported.\n   * If some of the rrule's options aren't supported, they'll\n   * be omitted from the output an \"(~ approximate)\" will be appended.\n   * @return {*}\n   */\n  ToText.prototype.toString = function () {\n    var gettext = this.gettext;\n    if (!(this.options.freq in ToText.IMPLEMENTED)) {\n      return gettext('RRule error: Unable to fully convert this rrule to text');\n    }\n    this.text = [gettext('every')];\n    // @ts-ignore\n    this[RRule.FREQUENCIES[this.options.freq]]();\n    if (this.options.until) {\n      this.add(gettext('until'));\n      var until = this.options.until;\n      this.add(this.language.monthNames[until.getUTCMonth()]).add(until.getUTCDate() + ',').add(until.getUTCFullYear().toString());\n    } else if (this.options.count) {\n      this.add(gettext('for')).add(this.options.count.toString()).add(this.plural(this.options.count) ? gettext('times') : gettext('time'));\n    }\n    if (!this.isFullyConvertible()) this.add(gettext('(~ approximate)'));\n    return this.text.join('');\n  };\n  ToText.prototype.HOURLY = function () {\n    var gettext = this.gettext;\n    if (this.options.interval !== 1) this.add(this.options.interval.toString());\n    this.add(this.plural(this.options.interval) ? gettext('hours') : gettext('hour'));\n  };\n  ToText.prototype.MINUTELY = function () {\n    var gettext = this.gettext;\n    if (this.options.interval !== 1) this.add(this.options.interval.toString());\n    this.add(this.plural(this.options.interval) ? gettext('minutes') : gettext('minutes'));\n  };\n  ToText.prototype.DAILY = function () {\n    var gettext = this.gettext;\n    if (this.options.interval !== 1) this.add(this.options.interval.toString());\n    if (this.byweekday && this.byweekday.isWeekdays) {\n      this.add(this.plural(this.options.interval) ? gettext('weekdays') : gettext('weekday'));\n    } else {\n      this.add(this.plural(this.options.interval) ? gettext('days') : gettext('day'));\n    }\n    if (this.origOptions.bymonth) {\n      this.add(gettext('in'));\n      this._bymonth();\n    }\n    if (this.bymonthday) {\n      this._bymonthday();\n    } else if (this.byweekday) {\n      this._byweekday();\n    } else if (this.origOptions.byhour) {\n      this._byhour();\n    }\n  };\n  ToText.prototype.WEEKLY = function () {\n    var gettext = this.gettext;\n    if (this.options.interval !== 1) {\n      this.add(this.options.interval.toString()).add(this.plural(this.options.interval) ? gettext('weeks') : gettext('week'));\n    }\n    if (this.byweekday && this.byweekday.isWeekdays) {\n      if (this.options.interval === 1) {\n        this.add(this.plural(this.options.interval) ? gettext('weekdays') : gettext('weekday'));\n      } else {\n        this.add(gettext('on')).add(gettext('weekdays'));\n      }\n    } else if (this.byweekday && this.byweekday.isEveryDay) {\n      this.add(this.plural(this.options.interval) ? gettext('days') : gettext('day'));\n    } else {\n      if (this.options.interval === 1) this.add(gettext('week'));\n      if (this.origOptions.bymonth) {\n        this.add(gettext('in'));\n        this._bymonth();\n      }\n      if (this.bymonthday) {\n        this._bymonthday();\n      } else if (this.byweekday) {\n        this._byweekday();\n      }\n    }\n  };\n  ToText.prototype.MONTHLY = function () {\n    var gettext = this.gettext;\n    if (this.origOptions.bymonth) {\n      if (this.options.interval !== 1) {\n        this.add(this.options.interval.toString()).add(gettext('months'));\n        if (this.plural(this.options.interval)) this.add(gettext('in'));\n      } else {\n        // this.add(gettext('MONTH'))\n      }\n      this._bymonth();\n    } else {\n      if (this.options.interval !== 1) this.add(this.options.interval.toString());\n      this.add(this.plural(this.options.interval) ? gettext('months') : gettext('month'));\n    }\n    if (this.bymonthday) {\n      this._bymonthday();\n    } else if (this.byweekday && this.byweekday.isWeekdays) {\n      this.add(gettext('on')).add(gettext('weekdays'));\n    } else if (this.byweekday) {\n      this._byweekday();\n    }\n  };\n  ToText.prototype.YEARLY = function () {\n    var gettext = this.gettext;\n    if (this.origOptions.bymonth) {\n      if (this.options.interval !== 1) {\n        this.add(this.options.interval.toString());\n        this.add(gettext('years'));\n      } else {\n        // this.add(gettext('YEAR'))\n      }\n      this._bymonth();\n    } else {\n      if (this.options.interval !== 1) this.add(this.options.interval.toString());\n      this.add(this.plural(this.options.interval) ? gettext('years') : gettext('year'));\n    }\n    if (this.bymonthday) {\n      this._bymonthday();\n    } else if (this.byweekday) {\n      this._byweekday();\n    }\n    if (this.options.byyearday) {\n      this.add(gettext('on the')).add(this.list(this.options.byyearday, this.nth, gettext('and'))).add(gettext('day'));\n    }\n    if (this.options.byweekno) {\n      this.add(gettext('in')).add(this.plural(this.options.byweekno.length) ? gettext('weeks') : gettext('week')).add(this.list(this.options.byweekno, undefined, gettext('and')));\n    }\n  };\n  ToText.prototype._bymonthday = function () {\n    var gettext = this.gettext;\n    if (this.byweekday && this.byweekday.allWeeks) {\n      this.add(gettext('on')).add(this.list(this.byweekday.allWeeks, this.weekdaytext, gettext('or'))).add(gettext('the')).add(this.list(this.bymonthday, this.nth, gettext('or')));\n    } else {\n      this.add(gettext('on the')).add(this.list(this.bymonthday, this.nth, gettext('and')));\n    }\n    // this.add(gettext('DAY'))\n  };\n  ToText.prototype._byweekday = function () {\n    var gettext = this.gettext;\n    if (this.byweekday.allWeeks && !this.byweekday.isWeekdays) {\n      this.add(gettext('on')).add(this.list(this.byweekday.allWeeks, this.weekdaytext));\n    }\n    if (this.byweekday.someWeeks) {\n      if (this.byweekday.allWeeks) this.add(gettext('and'));\n      this.add(gettext('on the')).add(this.list(this.byweekday.someWeeks, this.weekdaytext, gettext('and')));\n    }\n  };\n  ToText.prototype._byhour = function () {\n    var gettext = this.gettext;\n    this.add(gettext('at')).add(this.list(this.origOptions.byhour, undefined, gettext('and')));\n  };\n  ToText.prototype._bymonth = function () {\n    this.add(this.list(this.options.bymonth, this.monthtext, this.gettext('and')));\n  };\n  ToText.prototype.nth = function (n) {\n    n = parseInt(n.toString(), 10);\n    var nth;\n    var npos;\n    var gettext = this.gettext;\n    if (n === -1) return gettext('last');\n    npos = Math.abs(n);\n    switch (npos) {\n      case 1:\n      case 21:\n      case 31:\n        nth = npos + gettext('st');\n        break;\n      case 2:\n      case 22:\n        nth = npos + gettext('nd');\n        break;\n      case 3:\n      case 23:\n        nth = npos + gettext('rd');\n        break;\n      default:\n        nth = npos + gettext('th');\n    }\n    return n < 0 ? nth + ' ' + gettext('last') : nth;\n  };\n  ToText.prototype.monthtext = function (m) {\n    return this.language.monthNames[m - 1];\n  };\n  ToText.prototype.weekdaytext = function (wday) {\n    var weekday = isNumber(wday) ? (wday + 1) % 7 : wday.getJsWeekday();\n    return (wday.n ? this.nth(wday.n) + ' ' : '') + this.language.dayNames[weekday];\n  };\n  ToText.prototype.plural = function (n) {\n    return n % 100 !== 1;\n  };\n  ToText.prototype.add = function (s) {\n    this.text.push(' ');\n    this.text.push(s);\n    return this;\n  };\n  ToText.prototype.list = function (arr, callback, finalDelim, delim) {\n    if (delim === void 0) {\n      delim = ',';\n    }\n    if (!isArray(arr)) {\n      arr = [arr];\n    }\n    var delimJoin = function (array, delimiter, finalDelimiter) {\n      var list = '';\n      for (var i = 0; i < array.length; i++) {\n        if (i !== 0) {\n          if (i === array.length - 1) {\n            list += ' ' + finalDelimiter + ' ';\n          } else {\n            list += delimiter + ' ';\n          }\n        }\n        list += array[i];\n      }\n      return list;\n    };\n    callback = callback || function (o) {\n      return o.toString();\n    };\n    var self = this;\n    var realCallback = function (arg) {\n      return callback && callback.call(self, arg);\n    };\n    if (finalDelim) {\n      return delimJoin(arr.map(realCallback), delim, finalDelim);\n    } else {\n      return arr.map(realCallback).join(delim + ' ');\n    }\n  };\n  return ToText;\n}();\nexport default ToText;","map":{"version":3,"names":["ENGLISH","RRule","isArray","isNumber","isPresent","contains","arr","val","indexOf","defaultGetText","id","toString","ToText","rrule","gettext","language","text","options","origOptions","bymonthday","concat","bynmonthday","sort","a","b","length","byweekday","days","String","allWeeks","filter","weekday","n","someWeeks","Boolean","isWeekdays","isEveryDay","sortWeekDays","isFullyConvertible","canConvert","freq","IMPLEMENTED","until","count","key","prototype","FREQUENCIES","add","monthNames","getUTCMonth","getUTCDate","getUTCFullYear","plural","join","HOURLY","interval","MINUTELY","DAILY","bymonth","_bymonth","_bymonthday","_byweekday","byhour","_byhour","WEEKLY","MONTHLY","YEARLY","byyearday","list","nth","byweekno","undefined","weekdaytext","monthtext","parseInt","npos","Math","abs","m","wday","getJsWeekday","dayNames","s","push","callback","finalDelim","delim","delimJoin","array","delimiter","finalDelimiter","i","o","self","realCallback","arg","call","map"],"sources":["../../../src/nlp/totext.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}